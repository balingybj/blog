# 什么叫 “可靠性” ？

大家都在讨论“可靠性”，当大多数人都不知道 “可靠性” 真正的含义。实际上 “可靠性” 要根据故障来定义。就是说，如果我们能够处理一组定义良好、可理解的故障，我们就能可靠地处理这些故障。这个定义刚刚好。我们来看看分布式 ZeroMQ  应用程序中导致失败的可能原因，大致按概率降序排列：

- 应该程序代码问题。导致程序崩溃并退出，对输入没有响应，或响应太慢，耗尽内存，等等
- 系统代码问题。如使用 ZeroMQ 编写的 broker 可能出现和应用程序代码相同的问题。系统代码应该比应用代码更可靠，但任可能奔溃，比如当为慢客户端排队消息时耗尽内存
- 消息队列溢出。通常出现在采用残酷策略处理慢客户机的系统代码中。当队列溢出时，就开始丢弃消息，导致消息丢失
- 网络故障（例如，Wi-Fi 关闭或超出范围）。ZeroMQ 在这种情况下会自动重连，但同时，消息可能会丢失
- 硬件故障。硬件可能会出现故障，并带走该机器上所有运行的进程
- 网络可能出现奇怪的故障，例如，交换机上的某个端口可能会坏掉，导致网络上的这部分变得不可访问
- 整个数据中心都可能被闪电、地震、火灾或者更普通的电力或冷却故障袭击

要使得一个软件系统完全可靠地抵御所有这些可能出现的故障，太困难，成本也很昂贵，超出了本书的范围。

对于非大公司来说，这个故障列表中的前五条已经覆盖了现实世界中 99.9% 的需求（根据我刚刚进行的一项高度科学的研究得出，78% 的数据时现场编造的，永远不要相信我们没有弄虚作假的数据），所以我们只考虑前 5 条。如果有哪个大公司想解决列表中的后两条，请立刻联系我，我的海滨别墅后面有一个大洞，正等着改造成一个高级游泳池。

